"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2195],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=a,f=p["".concat(l,".").concat(m)]||p[m]||d[m]||o;return n?r.createElement(f,i(i({ref:t},c),{},{components:n})):r.createElement(f,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},19897:function(e,t,n){n.r(t),n.d(t,{assets:function(){return h},contentTitle:function(){return m},default:function(){return y},frontMatter:function(){return p},metadata:function(){return f},toc:function(){return g}});var r=n(3905),a=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&c(e,n,t[n]);if(s)for(var n of s(t))u.call(t,n)&&c(e,n,t[n]);return e};const p={},m="Storage",f={unversionedId:"manual/development/storage",id:"manual/development/storage",title:"Storage",description:"This article serves as a development extension to the storage article available here",source:"@site/docs/manual/development/storage.md",sourceDirName:"manual/development",slug:"/manual/development/storage",permalink:"/docs/manual/development/storage",draft:!1,editUrl:"https://github.com/truecharts/website/tree/master/docs/manual/development/storage.md",tags:[],version:"current",frontMatter:{},sidebar:"manualSidebar",previous:{title:"Services",permalink:"/docs/manual/development/services"},next:{title:"Unit tests",permalink:"/docs/manual/development/unit-tests"}},h={},g=[{value:"Storage and Common-Chart",id:"storage-and-common-chart",level:2},{value:"Integrated Persistent Storage",id:"integrated-persistent-storage",level:3},{value:"Unlimited Custom Storage Mounts",id:"unlimited-custom-storage-mounts",level:3}],b={toc:g};function y(e){var t,n=e,{components:a}=n,c=((e,t)=>{var n={};for(var r in e)l.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&s)for(var r of s(e))t.indexOf(r)<0&&u.call(e,r)&&(n[r]=e[r]);return n})(n,["components"]);return(0,r.kt)("wrapper",(t=d(d({},b),c),o(t,i({components:a,mdxType:"MDXLayout"}))),(0,r.kt)("h1",d({},{id:"storage"}),"Storage"),(0,r.kt)("p",null,"This article serves as a development extension to the storage article available ",(0,r.kt)("a",d({parentName:"p"},{href:"https://wiki.truecharts.org/general/storage/"}),"here")),(0,r.kt)("h2",d({},{id:"storage-and-common-chart"}),"Storage and Common-Chart"),(0,r.kt)("p",null,"For all these storage solutions we require the common-chart to be added to the App.\nThe Common-Chart handles both the connection/addition of storage to the container and spinning up special k8s jobs to fix the permissions if requested for the Custom storage."),(0,r.kt)("h3",d({},{id:"integrated-persistent-storage"}),"Integrated Persistent Storage"),(0,r.kt)("p",null,"When adding an App, there are almost always certain folders that are required for solid Apps performance. For example config files that should be persistent across restarts."),(0,r.kt)("p",null,'For these storages we can easily add fixes values in the UI, these settings can not be disabled or removed and would, by default and preferably, be limited to the "internal" storage class\nPreventing the user to disable them, ensures that users don\'t (by mistake) remove the storage.'),(0,r.kt)("pre",null,(0,r.kt)("code",d({parentName:"pre"},{className:"language-yaml"}),'  - variable: persistence\n    label: "Integrated Persistent Storage"\n    description: "Websocket Service"\n    group: "Storage"\n    schema:\n      type: dict\n      attrs:\n        - variable: data\n          label: "App Config Storage"\n          description: "Stores the Application Configuration."\n          schema:\n            type: dict\n            attrs:\n              - variable: enabled\n                label: "Enable the storage"\n                schema:\n                  type: boolean\n                  default: true\n                  hidden: false\n              - variable: storageClass\n                label: "Type of Storage"\n                description: " Warning: Anything other than SCALE-ZFS will break rollback!"\n                schema:\n                  type: string\n                  default: "SCALE-ZFS"\n              - variable: mountPath\n                label: "mountPath"\n                description: "Path inside the container the storage is mounted"\n                schema:\n                  type: string\n                  default: "/config"\n                  hidden: true\n              - variable: emptyDir\n                label: "EmptyDir Volume"\n                schema:\n                  type: dict\n                  hidden: false\n                  attrs:\n                    - variable: enabled\n                      label: "Use emptyDir volume"\n                      schema:\n                        type: boolean\n                        default: false\n                        hidden: false\n                        show_subquestions_if: true\n                        subquestions:\n                          - variable: medium\n                            label: "EmptyDir Medium"\n                            schema:\n                              type: string\n                              default: ""\n                              enum:\n                                - value: ""\n                                  description: "Default"\n                                - value: "Memory"\n                                  description: "Memory"\n              - variable: accessMode\n                label: "Access Mode (Advanced)"\n                description: "Allow or disallow multiple PVC\'s writhing to the same PVC"\n                schema:\n                  type: string\n                  default: "ReadWriteOnce"\n                  enum:\n                    - value: "ReadWriteOnce"\n                      description: "ReadWriteOnce"\n                    - value: "ReadOnlyMany"\n                      description: "ReadOnlyMany"\n                    - value: "ReadWriteMany"\n                      description: "ReadWriteMany"\n              - variable: size\n                label: "Size quotum of storage"\n                schema:\n                  type: string\n                  default: "100Gi"\n')),(0,r.kt)("h3",d({},{id:"unlimited-custom-storage-mounts"}),"Unlimited Custom Storage Mounts"),(0,r.kt)("p",null,'We support presenting the user with a "Do it yourself" style list, in which the user can add unlimited paths on the host system to mount.\nIt should always be included in any App, to give users the option to customize things however they like.'))}y.isMDXComponent=!0}}]);