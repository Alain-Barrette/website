"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[29313],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return k}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(n),k=r,m=d["".concat(s,".").concat(k)]||d[k]||c[k]||o;return n?a.createElement(m,l(l({ref:t},p),{},{components:n})):a.createElement(m,l({ref:t},p))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},44172:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return k},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return c}});var a=n(83117),r=n(80102),o=(n(67294),n(3905)),l=["components"],i={},s="Installation Guide",u={unversionedId:"charts/stable/nextcloud/installation",id:"charts/stable/nextcloud/installation",title:"Installation Guide",description:"Userdata Dataset",source:"@site/docs/charts/stable/nextcloud/installation.md",sourceDirName:"charts/stable/nextcloud",slug:"/charts/stable/nextcloud/installation",permalink:"/docs/charts/stable/nextcloud/installation",draft:!1,editUrl:"https://github.com/truecharts/website/tree/master/docs/charts/stable/nextcloud/installation.md",tags:[],version:"current",frontMatter:{},sidebar:"chartsSidebar",previous:{title:"Changelog",permalink:"/docs/charts/stable/nextcloud/CHANGELOG"},next:{title:"Important Notes",permalink:"/docs/charts/stable/nextcloud/installation_notes"}},p={},c=[{value:"Userdata Dataset",id:"userdata-dataset",level:2},{value:"App Setup",id:"app-setup",level:2},{value:"Container",id:"container",level:3},{value:"Storage",id:"storage",level:3},{value:"Ingress",id:"ingress",level:3}],d={toc:c};function k(e){var t=e.components,i=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"installation-guide"},"Installation Guide"),(0,o.kt)("h2",{id:"userdata-dataset"},"Userdata Dataset"),(0,o.kt)("p",null,"This is the optional location your Nextcloud userdata will be located"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"You do NOT need to create a dataset if you do not plan on using one. Nextcloud does not require one, instead you can rely on the PVC default")),(0,o.kt)("p",null,'??? Note "Note"\nThe ',(0,o.kt)("inlineCode",{parentName:"p"},"apps"),":",(0,o.kt)("inlineCode",{parentName:"p"},"apps")," user:group is built into Truenas SCALE, it is the default user for most applications on Truenas SCALE. You do not have to create a separate user for each application."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"When configuring your application you'll typically see user:group `568`, this is the UID for `apps` and its recommended not to change it.\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"You are REQUIRED to use the ",(0,o.kt)("inlineCode",{parentName:"li"},"www-data")," group and setting the permissions exactly, If you have anything different, chances are it will not work"),(0,o.kt)("li",{parentName:"ul"},"ACL's are known to cause problems with the Nextcloud Userdata folder, we advice you not to use them.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"!Dataset: Nextcloud",src:n(45845).Z,width:"852",height:"679"})),(0,o.kt)("h2",{id:"app-setup"},"App Setup"),(0,o.kt)("p",null,"For this application We used the ",(0,o.kt)("inlineCode",{parentName:"p"},"Nextcloud")," provided by ",(0,o.kt)("a",{parentName:"p",href:"https://truecharts.org/manual/Quick-Start%20Guides/01-Adding-TrueCharts/"},"TrueCharts"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Available under the ",(0,o.kt)("inlineCode",{parentName:"li"},"stable")," train")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"!Container: Tube",src:n(33309).Z,width:"745",height:"206"})),(0,o.kt)("br",null),(0,o.kt)("h3",{id:"container"},"Container"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Application Name")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"nextcloud\n")),(0,o.kt)("p",null,"Name it whatever you want, We stick with the chart name for now"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"NEXTCLOUD_ADMIN_USER (First Install Only)")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"USERNAME\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This is up to you")),(0,o.kt)("br",null),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"NEXTCLOUD_ADMIN_PASSWORD (First Install Only)")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"PASSWORD\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This is up to you")),(0,o.kt)("br",null),(0,o.kt)("br",null),(0,o.kt)("h3",{id:"storage"},"Storage"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This is an optional step, if you did not create a separate dataset, you can skip this")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Ensure you are under ",(0,o.kt)("inlineCode",{parentName:"li"},"UserData Storage")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"Type of Storage")," should be ",(0,o.kt)("inlineCode",{parentName:"li"},"Hostpath (simple)")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"Hostpath")," should be the path to the dataset you created")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"!Container: Env_Var",src:n(86591).Z,width:"786",height:"699"})),(0,o.kt)("br",null),(0,o.kt)("br",null),(0,o.kt)("h3",{id:"ingress"},"Ingress"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This is another optional step, if you never plan on using ingress, you can skip this.")),(0,o.kt)("br",null),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Configure Hosts > Add"),(0,o.kt)("li",{parentName:"ol"},"Configure Paths > Add"),(0,o.kt)("li",{parentName:"ol"},"Type your hostname under ",(0,o.kt)("inlineCode",{parentName:"li"},"HostName"))),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"!Container: Ingres",src:n(30888).Z,width:"776",height:"589"})),(0,o.kt)("br",null),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Configure TLS-Settings > Add"),(0,o.kt)("li",{parentName:"ol"},"Configure Certificate Hosts > Add"),(0,o.kt)("li",{parentName:"ol"},"Type your hostname under ",(0,o.kt)("inlineCode",{parentName:"li"},"HostName")),(0,o.kt)("li",{parentName:"ol"},"Select your correct cert")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"We do not add any middlewares, since Nextcloud has its own authentication, and adding middlewares breaks phone backups, since it has no way to authenticate through Authelia")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"!Container: Ingres",src:n(5641).Z,width:"769",height:"594"})),(0,o.kt)("br",null))}k.isMDXComponent=!0},45845:function(e,t,n){t.Z=n.p+"assets/images/dataset-fd737473596f7d052fd33bba0dc45837.png"},30888:function(e,t,n){t.Z=n.p+"assets/images/ingress1-0053b0fb1d03d3086f4a339351f62a80.png"},5641:function(e,t,n){t.Z=n.p+"assets/images/ingress2-15eb714488699f2d3e036fe1da11dbe3.png"},33309:function(e,t,n){t.Z=n.p+"assets/images/nextcloud-ced468ad1a5126f3c5117a357aff95cb.png"},86591:function(e,t,n){t.Z=n.p+"assets/images/storage-c4df78ab96e89b48fb586a3ebb1748d5.png"}}]);